
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TwitchTV SDK Example App</title>

<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="twitch.min.js"></script>

<script>

$(function() {

var myToken = 't269s0zm0pnrf97hv84dvyh35b5rnk';

  Twitch.init({clientId: '2zm8olne4iyx9zt9ro40h7vxool7910'}, function(error, status) {
if (status.authenticated) {
            // Already logged in, change button and store token
            myToken = Twitch._config.session.token;
            $('.twitch-connect').html('<button>Request new Token</button>');
        }
  });
$('.twitch-connect').click(function() {
  Twitch.login({redirect_uri: 'http://bizkit047.github.io/project_albert/', popup: false,
    scope: ['user_read', 'channel_read', 'channel_editor', 'channel_subscriptions', 'user_subscriptions', 'channel_check_subscription', 'channel_commercial']
  });
});

        $('.comm').click(function() {
                $.ajax({
                        url: 'https://api.twitch.tv/kraken/channels/bizkit047/commercial',
                        type: 'POST'
                        contentType: 'application/json',
                        dataType: 'jsonp',
                        data: {
                                oauth_token: myToken
                        },
                        headers: {'Authorization': 'OAuth ' + myToken
                        },
                        success: function (response) {
                                console.log(response);
                        },
                        failure: function (response) {
                                console.log(response);
                        }
                });
        });

$('.get-status').click(function(){
                     document.getElementById("starting").innerHTML = "Starting...";
  $.ajax({ url: 'https://api.twitch.tv/kraken/channels/bizkit047/subscriptions?oauth_token=' + myToken,
            type: 'GET',
            contentType: 'application/json',
            dataType: 'jsonp',
            success: function(data) {
                      //This appears to work fine
                      //var test = data.subscriptions;
                      
                     }
        })

                                 });

    });
</script>

<script>
window.onload = function(){
    document.getElementById("url").innerHTML = window.location.toString();
}
</script>

</head>

<body>

<img src="http://ttv-api.s3.amazonaws.com/assets/connect_dark.png" class="twitch-connect" href="#" />
<br>
<img src="http://ttv-api.s3.amazonaws.com/assets/connect_dark.png" class="get-status" href="#" />
<br>
<img src="http://ttv-api.s3.amazonaws.com/assets/connect_dark.png" class="comm" href="#" />
<br>
<br>

<p id="url">Current URL here</p>
<br><br>
<p id="starting"></p>
<br><br>
<p id="idk"></p>
<br><br>
<p id="datastatus"></p>
</body>

</html>
